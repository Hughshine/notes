# 容错

可信系统的特征；提高系统可信性的途径
1. 可用性：正确即时的工作，响应用户
2. 可靠性：尽量少的故障
3. 安全性：特殊情况，不会有灾难事件发生
4. 可维护性：容易修复故障

提升可靠性：
1. 借助冗余掩盖故障
   1. 信息冗余：放一点辅助信息
   2. 时间冗余：transaction
   3. 物理冗余：额外设备；额外软件
2. 采用一种不必要求所有关键组件同时都可用的系统设计

“达成一致”问题：没有出现错误的进程，对某一件事达成一致
1. 通讯错误：two-army problem
2. 处理器错误：拜占庭将军问题

two-army problem: 两个进程在不稳定通讯中无法达成一致（双方达成一致的前提是“对方对本条信息（永远是最后一条）达成一致”）【无法确定每一次信息的可靠性】。TCP：超时重传。（错误处理器不会发送信息）

K容错：k个fault-silent faults，需要k+1个工作良好的处理器

拜占庭问题：（假设信道可信）（错误处理器会乱发送信息）
1. 每个将军告知其他将军自己的兵力
2. 每个将军收集向量，广播向量
3. 对于向量中的每一项，取（收到的）多数

拜占庭问题，若在有m个错误的处理器情况下达成一致，必须要有2m+1个处理器工作良好。

系统恢复：后退恢复（回到之前的某个正确状态），前向恢复（继续执行，让系统进入正确状态）

一致的全局状态：（每个系统回到各自的之前的某个状态，这些状态间不能通信差，意味着同步）
* 发送方不能回滚到发送前状态
* 接收方可以回滚到接受前的状态

检查点：系统定时记录（本地）状态
